title: Xquery 20150314 215747
given:
  - time: 2015-03-14T21:57:47.480-04:00
wts:
  - when: |
       GET xquery?query=declare%20default%20element%20namespace%20%22http%3A%2F%2Fwww.w3.org%2F1998%2FMath%2FMathML%22%3B%20for%20%24m%20in%20%2F%2F*%3Aexpr%20return%20%20for%20%24x%20in%20%24m%2F%2F*%3Aapply%20%5B*%5B1%5D%2Fname()%20%3D%20%27divide%27%5D%20where%20fn%3Acount(%24x%2F*)%20%3D%203%20return%20%3Cresult%3E%7B%24m%2F%40url%7D%3C%2Fresult%3E
       Cookie: RestxSession-BaseXMathSearch={"_expires":"2015-04-13T21:57:47.480-04:00","principal":"admin","sessionKey":"ee1ff58c-42ba-4f29-9576-a1cb3d0c9e48"}; RestxSessionSignature-BaseXMathSearch=qCabVzYBEOiZuwY05oZsIVD1wso=
    then: |
        {
          "type": "xquery",
          "query": "declare default element namespace \"http://www.w3.org/1998/Math/MathML\"; for $m in //*:expr return  for $x in $m//*:apply [*[1]/name() = 'divide'] where fn:count($x/*) = 3 return <result>{$m/@url}</result>",
          "response": "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<results xmlns=\"http://ntcir-math.nii.ac.jp/\">\n  <run runtag=\"\" run_type=\"\">\n    <result for=\"NTCIR11-Math-\">\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;4#math.4.5&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"1\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;4#math.4.5&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"2\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;5#math.5.2&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"3\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;5#math.5.17&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"4\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;5#math.5.18&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"5\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;5#math.5.18&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"6\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;5#math.5.19&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"7\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;5#math.5.19&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"8\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;5#math.5.19&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"9\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;5#math.5.20&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"10\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;5#math.5.21&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"11\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;5#math.5.22&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"12\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;5#math.5.23&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"13\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;6#math.6.11&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"14\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;6#math.6.14&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"15\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;6#math.6.15&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"16\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;6#math.6.15&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"17\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;6#math.6.15&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"18\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;6#math.6.15&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"19\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;6#math.6.20&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"20\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;7#math.7.0&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"21\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;7#math.7.1&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"22\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;7#math.7.1&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"23\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;7#math.7.2&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"24\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;7#math.7.2&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"25\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;7#math.7.3&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"26\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;7#math.7.3&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"27\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;7#math.7.4&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"28\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;8#math.8.6&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"29\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;8#math.8.7&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"30\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;8#math.8.21&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"31\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;8#math.8.22&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"32\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;8#math.8.23&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"33\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;8#math.8.33&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"34\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;8#math.8.34&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"35\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;8#math.8.35&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"36\"/>\n      <hit id=\"&lt;result xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; url=&quot;dummy29&quot;/&gt;\" xref=\"\" score=\"10\" rank=\"37\"/>\n    </result>\n  </run>\n</results>",
          "success": true
        }
